<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' https://wallpapers.com; frame-src https://xephorium.github.io; connect-src 'self';">
    <meta property="og:title" content="Halo Quotes by Team Respawn">
    <meta property="og:description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://haloquotes.teamrespawntv.com">
    <meta property="og:image" content="https://haloquotes.teamrespawntv.com/og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Halo Quotes by Team Respawn">
    <meta name="twitter:description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <title>Halo Quotes by Team Respawn</title>
    <link rel="icon" type="image/png" href="/img/256x256.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            position: relative;
        }

        #background-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: -2; /* Sits behind everything else */
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            z-index: -1; /* Sits between the content and the background */
        }

        /* Ensure content is on top of the overlay */
        .min-h-screen {
            position: relative;
            z-index: 1;
        }
        
        /* New style for the transparent modal background */
        .transparent-modal-bg {
            background-color: rgba(255, 255, 255, 1); /* Last value reflects opacity */
        }

        /* Fixed size for quote container */
        #quote-container {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Ensure quote text takes available space */
        #quote-text {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Mobile-specific styles for the background */
        @media (max-width: 768px) {
            body {
                background-image: url('https://wallpapers.com/images/hd/master-chief-phone-32ja876t0j9rii9c.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                background-attachment: fixed;
            }
            #background-iframe {
                display: none;
            }
        }

        /* Hamburger menu styles - Desktop only */
        @media (min-width: 769px) {
            #hamburger-btn {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 100;
                background-color: rgba(55, 65, 81, 0.9);
                border: none;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                transition: background-color 0.3s;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #hamburger-btn:hover {
                background-color: rgba(75, 85, 99, 0.9);
            }

            #hamburger-btn svg {
                width: 24px;
                height: 24px;
                stroke: white;
            }

            #menu-panel {
                position: fixed;
                top: 0;
                left: 0;
                width: 280px;
                height: 100vh;
                background-color: rgba(55, 65, 81, 0.95);
                backdrop-filter: blur(10px);
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                z-index: 99;
                padding: 80px 20px 20px 20px;
                box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
            }

            #menu-panel.menu-open {
                transform: translateX(0);
            }

            #menu-panel ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            #menu-panel li {
                margin-bottom: 16px;
            }

            #menu-panel a {
                display: block;
                color: rgba(255, 255, 255, 0.9);
                text-decoration: none;
                padding: 12px 16px;
                border-radius: 8px;
                transition: all 0.2s;
                font-size: 16px;
            }

            #menu-panel a:hover {
                background-color: rgba(255, 255, 255, 0.1);
                color: white;
                transform: translateX(4px);
            }
        }

        /* Hide hamburger menu on mobile */
        @media (max-width: 768px) {
            #hamburger-btn,
            #menu-panel {
                display: none;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col justify-between">
    <!-- <iframe id="background-iframe" src="https://xephorium.github.io/Halo3LoadingScreen/?2k&nologo"></iframe> -->
    <img src="img/HCE-Environment-1920x1080-02-Watermarked.png" alt="Halo Background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; transform: scale(1.15);">

    <!-- Hamburger Menu Button -->
    <button id="hamburger-btn" aria-label="Toggle menu">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Menu Panel -->
    <div id="menu-panel">
        <ul>
            <li>
                <a href="https://api.haloquotes.teamrespawntv.com/" target="_blank" rel="noopener noreferrer">API</a>
            </li>
            <li>
                <a href="https://github.com/AndyTheNerd/Halo-Quotes" target="_blank" rel="noopener noreferrer">Source Code</a>
            </li>
            <li>
                <a href="https://teamrespawntv.com" target="_blank" rel="noopener noreferrer">Team Respawn Website</a>
            </li>
            <li>
                <a href="https://www.youtube.com/@TeamRespawn" target="_blank" rel="noopener noreferrer">Team Respawn YouTube</a>
            </li>
        </ul>
    </div>

    <div class="flex-grow flex items-center justify-center">
        <div class="max-w-xl w-full mx-4 p-8 rounded-xl shadow-lg transform transition-all duration-300 hover:scale-105 transparent-modal-bg">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Halo Quotes</h1>
            <div id="quote-container" class="relative p-6 rounded-lg border-l-4 border-gray-400" style="background-color: rgba(243, 244, 246, 0.85);">
                <p id="quote-text" class="text-lg text-gray-700 italic text-center mb-2">
                    </p>
                <p id="quote-source" class="text-sm text-gray-500 text-center">
                    </p>
            </div>
            <div class="flex justify-center gap-3 mt-6" style="min-height: 48px;">
                <button id="copy-btn" class="bg-gray-600 text-white font-semibold py-2 px-6 rounded-full shadow-md hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition-colors duration-300 flex items-center gap-2" title="Copy quote to clipboard">
                    <svg id="copy-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    <svg id="check-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span id="copy-text">Copy</span>
                </button>
                <button id="previous-quote-btn" class="bg-gray-800 text-white font-semibold py-2 px-6 rounded-full shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-300 disabled:opacity-50" disabled>
                    Previous Quote
                </button>
                <button id="next-quote-btn" class="bg-gray-800 text-white font-semibold py-2 px-6 rounded-full shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-300">
                    Next Quote
                </button>
            </div>
        </div>
    </div>

    <div class="fixed bottom-4 left-0 w-full text-center text-gray-400 text-sm">
        Found an incorrect quote? Report it <a href="https://forms.gle/QRq66zXDMhUBrDYB8" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">here</a>.
        <br>
        Made with <span class="text-red-500">‚ù§</span> by <a href="https://www.youtube.com/@TeamRespawn" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">Team Respawn</a>
        <br>
        View the code <a href="https://github.com/AndyTheNerd/Halo-Quotes" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">here.</a>  This unofficial website is open source and free to use.
    </div>

    <script>
        const quoteTextElement = document.getElementById('quote-text');
        const quoteSourceElement = document.getElementById('quote-source');
        const nextQuoteBtn = document.getElementById('next-quote-btn');
        const previousQuoteBtn = document.getElementById('previous-quote-btn');
        const copyBtn = document.getElementById('copy-btn');
        const copyIcon = document.getElementById('copy-icon');
        const checkIcon = document.getElementById('check-icon');
        const copyText = document.getElementById('copy-text');
        
        // Store current quote data for copying
        let currentQuote = '';
        let currentGame = '';

        // History for quotes
        let quoteHistory = [];
        let currentQuoteIndex = -1;
        
        // List of available quote files
        const quoteFiles = [
            'quotes/halo-ce.json',
            'quotes/halo-2.json',
            'quotes/halo-3.json',
            'quotes/halo-odst.json',
            'quotes/halo-reach.json',
            'quotes/halo-4.json',
            'quotes/halo-5.json',
            'quotes/halo-infinite.json',
            'quotes/halo-wars.json',
            'quotes/halo-wars-2.json',
            'quotes/halo-multiplayer.json'
        ];

        // Function to display a loading state
        function showLoading() {
            quoteTextElement.textContent = 'Loading...';
            quoteSourceElement.textContent = '';
            // Disable buttons during loading
            copyBtn.disabled = true;
            nextQuoteBtn.disabled = true;
            previousQuoteBtn.disabled = true;
        }

        // Function to display an error message
        function showError(message) {
            quoteTextElement.textContent = `Error: ${message}`;
            quoteSourceElement.textContent = 'Please try again.';
            // Disable copy button on error
            copyBtn.disabled = true;
        }

        // Function to update the displayed quote and button states
        function showQuote() {
            const quoteData = quoteHistory[currentQuoteIndex];
            currentQuote = quoteData.quote;
            currentGame = quoteData.game;

            quoteTextElement.textContent = `"${currentQuote}"`;
            quoteSourceElement.textContent = `- ${currentGame}`;

            // Update button states
            previousQuoteBtn.disabled = currentQuoteIndex <= 0;
            copyBtn.disabled = false;
            nextQuoteBtn.disabled = false;
        }

        // Function to copy quote to clipboard
        async function copyQuoteToClipboard() {
            if (!currentQuote || !currentGame) {
                return;
            }

            try {
                // Format the quote for copying: "Quote" - Game Name
                const textToCopy = `"${currentQuote}"\n\n- ${currentGame}`;
                
                // Use the Clipboard API
                await navigator.clipboard.writeText(textToCopy);
                
                // Show success feedback
                copyIcon.classList.add('hidden');
                checkIcon.classList.remove('hidden');
                copyText.textContent = 'Copied!';
                copyBtn.classList.remove('bg-gray-600', 'hover:bg-gray-500');
                copyBtn.classList.add('bg-green-600', 'hover:bg-green-500');
                
                // Reset after 2 seconds
                setTimeout(() => {
                    copyIcon.classList.remove('hidden');
                    checkIcon.classList.add('hidden');
                    copyText.textContent = 'Copy';
                    copyBtn.classList.remove('bg-green-600', 'hover:bg-green-500');
                    copyBtn.classList.add('bg-gray-600', 'hover:bg-gray-500');
                }, 2000);
            } catch (error) {
                console.error('Failed to copy:', error);
                // Fallback for older browsers
                try {
                    const textArea = document.createElement('textarea');
                    textArea.value = `"${currentQuote}"\n\n- ${currentGame}`;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    
                    // Show success feedback even with fallback
                    copyIcon.classList.add('hidden');
                    checkIcon.classList.remove('hidden');
                    copyText.textContent = 'Copied!';
                    copyBtn.classList.remove('bg-gray-600', 'hover:bg-gray-500');
                    copyBtn.classList.add('bg-green-600', 'hover:bg-green-500');
                    
                    setTimeout(() => {
                        copyIcon.classList.remove('hidden');
                        checkIcon.classList.add('hidden');
                        copyText.textContent = 'Copy';
                        copyBtn.classList.remove('bg-green-600', 'hover:bg-green-500');
                        copyBtn.classList.add('bg-gray-600', 'hover:bg-gray-500');
                    }, 2000);
                } catch (fallbackError) {
                    console.error('Fallback copy failed:', fallbackError);
                    copyText.textContent = 'Failed';
                    setTimeout(() => {
                        copyText.textContent = 'Copy';
                    }, 2000);
                }
            }
        }

        // Async function to fetch and display a new quote
        async function fetchAndShowQuote() {
            currentQuoteIndex++;

            if (currentQuoteIndex < quoteHistory.length) {
                showQuote();
                return;
            }

            try {
                showLoading();
                nextQuoteBtn.textContent = 'Loading...';

                const randomFile = quoteFiles[Math.floor(Math.random() * quoteFiles.length)];
                const response = await fetch(randomFile);
                
                if (!response.ok) {
                    throw new Error(`Failed to load quotes: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();

                if (!data.gameName || !Array.isArray(data.quotes) || data.quotes.length === 0) {
                    throw new Error('Invalid quote file format');
                }

                const randomQuote = data.quotes[Math.floor(Math.random() * data.quotes.length)];
                
                quoteHistory.push({ quote: randomQuote, game: data.gameName });
                showQuote();

            } catch (error) {
                console.error('Error loading quote:', error);
                let errorMessage = 'Unable to load quote. ';
                if (error.message.includes('Failed to fetch') || error.message.includes('CORS')) {
                    errorMessage += 'This site needs to be served from a web server (not opened directly as a file). ';
                } else {
                    errorMessage += error.message || 'Please check your connection and try again.';
                }
                showError(errorMessage);
                currentQuoteIndex--; // Decrement index on failure
            } finally {
                nextQuoteBtn.textContent = 'Next Quote';
                nextQuoteBtn.disabled = false;
            }
        }
        
        function showPreviousQuote() {
            if (currentQuoteIndex > 0) {
                currentQuoteIndex--;
                showQuote();
            }
        }

        // Hamburger menu functionality
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const menuPanel = document.getElementById('menu-panel');

        function toggleMenu() {
            menuPanel.classList.toggle('menu-open');
        }

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const isClickInsideMenu = menuPanel.contains(event.target);
            const isClickOnButton = hamburgerBtn.contains(event.target);
            
            if (!isClickInsideMenu && !isClickOnButton && menuPanel.classList.contains('menu-open')) {
                menuPanel.classList.remove('menu-open');
            }
        });

        // Event listeners
        nextQuoteBtn.addEventListener('click', fetchAndShowQuote);
        previousQuoteBtn.addEventListener('click', showPreviousQuote);
        copyBtn.addEventListener('click', copyQuoteToClipboard);
        hamburgerBtn.addEventListener('click', toggleMenu);

        // Display an initial quote when the page loads
        fetchAndShowQuote();
    </script>
</body>
</html>


