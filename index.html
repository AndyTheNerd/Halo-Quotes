<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' https://wallpapers.com; frame-src https://xephorium.github.io; connect-src 'self';">
    <meta property="og:title" content="Halo Quotes by Team Respawn">
    <meta property="og:description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://haloquotes.teamrespawntv.com">
    <meta property="og:image" content="https://haloquotes.teamrespawntv.com/og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Halo Quotes by Team Respawn">
    <meta name="twitter:description" content="Random quotes from the Halo video game series. Discover memorable lines from Master Chief, Cortana, and more.">
    <title>Halo Quotes by Team Respawn</title>
    <link rel="icon" type="image/png" href="/img/256x256.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            position: relative;
        }

        #background-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: -2; /* Sits behind everything else */
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            z-index: -1; /* Sits between the content and the background */
        }

        /* Ensure content is on top of the overlay */
        .min-h-screen {
            position: relative;
            z-index: 1;
        }
        
        /* New style for the transparent modal background */
        .transparent-modal-bg {
            background-color: rgba(255, 255, 255, 1); /* Last value reflects opacity */
        }

        /* Fixed size for quote container */
        #quote-container {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Ensure quote text takes available space */
        #quote-text {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Mobile-specific styles for the background */
        @media (max-width: 768px) {
            body {
                background-image: url('https://wallpapers.com/images/hd/master-chief-phone-32ja876t0j9rii9c.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                background-attachment: fixed;
            }
            #background-iframe {
                display: none;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col justify-between">
    <iframe id="background-iframe" src="https://xephorium.github.io/Halo3LoadingScreen/?2k&nologo"></iframe>

    <div class="flex-grow flex items-center justify-center">
        <div class="max-w-xl w-full mx-4 p-8 rounded-xl shadow-lg transform transition-all duration-300 hover:scale-105 transparent-modal-bg">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Halo Quotes</h1>
            <div id="quote-container" class="relative p-6 rounded-lg border-l-4 border-gray-400" style="background-color: rgba(243, 244, 246, 0.85);">
                <p id="quote-text" class="text-lg text-gray-700 italic text-center mb-2">
                    </p>
                <p id="quote-source" class="text-sm text-gray-500 text-center">
                    </p>
            </div>
            <div class="flex justify-center mt-6" style="min-height: 48px;">
                <button id="next-quote-btn" class="bg-gray-800 text-white font-semibold py-2 px-6 rounded-full shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-300">
                    Next Quote
                </button>
            </div>
        </div>
    </div>

    <div class="fixed bottom-4 left-0 w-full text-center text-gray-400 text-sm">
        Found an incorrect quote? Report it <a href="https://forms.gle/QRq66zXDMhUBrDYB8" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">here</a>.
        <br>
        Made with <span class="text-red-500">‚ù§</span> by <a href="https://www.youtube.com/@TeamRespawn" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">Team Respawn</a>
        <br>
        View the code <a href="https://github.com/AndyTheNerd/Halo-Quotes" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-colors duration-200">here</a>
    </div>

    <script>
        const quoteTextElement = document.getElementById('quote-text');
        const quoteSourceElement = document.getElementById('quote-source');
        const nextQuoteBtn = document.getElementById('next-quote-btn');
        
        // List of available quote files
        const quoteFiles = [
            'quotes/halo-ce.json',
            'quotes/halo-2.json',
            'quotes/halo-3.json',
            'quotes/halo-odst.json',
            'quotes/halo-reach.json',
            'quotes/halo-4.json',
            'quotes/halo-5.json',
            'quotes/halo-infinite.json',
            'quotes/halo-wars.json',
            'quotes/halo-wars-2.json',
            'quotes/halo-multiplayer.json'
        ];

        // Function to display a loading state
        function showLoading() {
            quoteTextElement.textContent = 'Loading...';
            quoteSourceElement.textContent = '';
        }

        // Function to display an error message
        function showError(message) {
            quoteTextElement.textContent = `Error: ${message}`;
            quoteSourceElement.textContent = 'Please try again.';
        }

        // Async function to fetch and display a random quote
        async function displayRandomQuote() {
            try {
                // Show loading state
                showLoading();
                
                // Disable button during fetch
                nextQuoteBtn.disabled = true;
                nextQuoteBtn.textContent = 'Loading...';

                // Randomly select a quote file
                const randomFile = quoteFiles[Math.floor(Math.random() * quoteFiles.length)];

                // Fetch the JSON file
                const response = await fetch(randomFile);
                
                if (!response.ok) {
                    throw new Error(`Failed to load quotes: ${response.status} ${response.statusText}`);
                }

                // Parse the JSON
                const data = await response.json();

                // Validate the data structure
                if (!data.gameName || !Array.isArray(data.quotes) || data.quotes.length === 0) {
                    throw new Error('Invalid quote file format');
                }

                // Randomly select a quote from the array
                const randomQuote = data.quotes[Math.floor(Math.random() * data.quotes.length)];
            
            // Update the HTML elements
            quoteTextElement.textContent = `"${randomQuote}"`;
                quoteSourceElement.textContent = `- ${data.gameName}`;

            } catch (error) {
                console.error('Error loading quote:', error);
                // Provide more specific error messages
                let errorMessage = 'Unable to load quote. ';
                if (error.message.includes('Failed to fetch') || error.message.includes('CORS')) {
                    errorMessage += 'This site needs to be served from a web server (not opened directly as a file). ';
                    errorMessage += 'Try using: python -m http.server 8000 or npx serve';
                } else {
                    errorMessage += error.message || 'Please check your connection and try again.';
                }
                showError(errorMessage);
            } finally {
                // Re-enable button
                nextQuoteBtn.disabled = false;
                nextQuoteBtn.textContent = 'Next Quote';
            }
        }

        // Display a new random quote when the button is clicked
        nextQuoteBtn.addEventListener('click', displayRandomQuote);

        // Display an initial quote when the page loads
        displayRandomQuote();
    </script>
</body>
</html>


